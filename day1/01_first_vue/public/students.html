<!DOCTYPE html>
<html>
    <head>
        <script src="./lib/vue.js"></script>
    </head>
    <body>
        å­¦ç”Ÿç®¡ç†
        <div id="app">
            <table border="1">
                <thead>
                    <tr>
                        <th>å§“å</th>
                        <th>æ€§åˆ«</th>
                        <th>å¹´é¾„</th>
                        <th>åˆ†æ•°</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- v-for æ˜¯ vue æä¾›çš„ä¸€ä¸ªæŒ‡ä»¤, ç”¨æ¥å¾ªç¯éå† ä¸€ä¸ª æ•°ç»„ -->
                    <tr v-for="student in student_list">
                        <td>{{ student.name }}</td>
                        <td>
                            <span v-if="student.sex === 'ç”·'">ğŸ‘±</span>
                            <span v-else-if="student.sex === 'å¥³'">ğŸ‘©</span>
                            <span v-else>ï¼Ÿ</span>
                            
                        </td>
                        <td>{{ student.age }}</td>
                        <td>
                            <span v-if="student.score < 60" style="color: orange">{{ student.score }}</span>
                            <span v-else-if="student.score < 100" style="color: green">{{ student.score }}</span>
                            <span v-else style="color: red">{{student.score}}</span>
                            
                        
                        </td>
                        <td>
                            <!-- v-on æ˜¯ vue æä¾› çš„ä¸€ä¸ªç›‘å¬äº‹ä»¶çš„æŒ‡ä»¤ :click è¡¨ç¤ºç›‘å¬ ç‚¹å‡»äº‹ä»¶ -->
                            <button v-on:click="deleteStudent(student)">åˆ é™¤</button>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                        <tr>
                            <td colspan="2">åˆè®¡:</td>
                            <td>{{ totalAge }}</td>
                            <td>{{ totalScore }}</td>
                        </tr>
                    </tfoot>
            </table>
            <div>
                <!-- ref æ˜¯ vue æä¾›çš„ä¸€ä¸ª å¿«æ·çš„è·å– å…ƒç´ å¯¹è±¡çš„æ–¹å¼ -->
                å§“å: <input ref="stu_name" /><br/>
                å¹´é¾„: <input ref="stu_age" /><br/>
                æ€§åˆ«: <input ref="stu_sex" /><br/>
                åˆ†æ•°: <input ref="stu_score" /><br/>
                <!-- v-on æ˜¯ vue æä¾› çš„ä¸€ä¸ªç›‘å¬äº‹ä»¶çš„æŒ‡ä»¤ :click è¡¨ç¤ºç›‘å¬ ç‚¹å‡»äº‹ä»¶ -->
                <button v-on:click="addStudent">æ·»åŠ </button>
            </div>
        </div>

        <script>
            // Vue æ„é€ å‡½æ•°
            new Vue({
                el: '#app', // å‘Šè¯‰ vue id ä¸º app çš„div è¢« vue æ¥ç®¡
                data: {   // data ä»£è¡¨ æ•°æ®æ¨¡å‹
                    // student_list æ˜¯æ•°æ®æ¨¡å‹å¯¹è±¡ä¸Šçš„å±æ€§
                    student_list: [
                        {name: 'å¼ ä¸‰', age: 18, sex: 'ç”·', score: 100},
                        {name: 'æå››', age: 28, sex: 'å¥³', score: 90},
                        {name: 'ç‹äº”', age: 20, sex: 'ç”·', score: 55},
                        {name: 'èµµå…­', age: 22, sex: 'å¥³', score: 80},
                    ]
                },
                methods: { // methods ç”¨æ¥å£°æ˜ä¸€äº› æ–¹æ³•, ä¾› vue è°ƒç”¨
                    deleteStudent(student) {
                        alert('hi ' + student.name)
                        // è¿”å› student åœ¨æ•°ç»„ä¸­çš„ ä½ç½®
                        let index = this.student_list.indexOf(student);
                        alert(index);
                        // åˆ é™¤ æ­¤ä½ç½®çš„ä¸€ä¸ªå…ƒç´ , å³ åˆ é™¤ student å¯¹è±¡
                        this.student_list.splice(index, 1)
                    },
                    addStudent() {
                        // this.$refs vue æä¾›çš„ä¸€ç§å¿«é€Ÿçš„è·å– dom å…ƒç´  çš„æœºåˆ¶
                        console.log(this.$refs.stu_name.value)
                        // è·å–è¡¨å• å…ƒç´ çš„å€¼
                        let student = {
                            name: this.$refs.stu_name.value,
                            age: Number(this.$refs.stu_age.value), // ageæ˜¯æ•°å€¼ç±»å‹, éœ€è¦è½¬æ¢ä¸ºæ•°å­—
                            sex: this.$refs.stu_sex.value,
                            score: Number(this.$refs.stu_score.value) //ageæ˜¯æ•°å€¼ç±»å‹, éœ€è¦è½¬æ¢ä¸ºæ•°å­—
                        }
                        console.log(student);
                        // æ·»åŠ ä¸€ä¸ª å­¦ç”Ÿ åˆ° student_list ä¸­, ç•Œé¢å°†è‡ªåŠ¨è¢«é‡æ–° æ¸²æŸ“åˆ·æ–°
                        this.student_list.push(student);

                        // æ·»åŠ å®Œæ¯• æ¸…é™¤è¡¨å• æ•°æ®
                        this.$refs.stu_name.value = '';
                        this.$refs.stu_age.value = '';
                        this.$refs.stu_sex.value = '';
                        this.$refs.stu_score.value = '';
                        
                        alert('add haha');
                    }
                },
                // computed ç”¨æ¥å®šä¹‰ ä¸€ä¸‹ "è®¡ç®—å±æ€§" , 
                // å½“è®¡ç®—å±æ€§ ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–,é‚£ä¹ˆé‡æ–°è®¡ç®—
                computed: { 
                    totalAge() { // totalAge è®¡ç®— å±æ€§ä¾èµ–äº student_list
                        // this è¡¨ç¤º å½“å‰ vue å®ä¾‹
                        let total = 0; // å¾ªç¯ è®¿é—® student_list æ•°ç»„, ç»Ÿè®¡ æ€»å¹´é¾„
                        for (let student of this.student_list) {
                            total = total + student.age;
                        }
                        return total;
                    },
                    totalScore: function() {
                        let total = 0;
                        for (let student of this.student_list) {
                            total = total + student.score;
                        }
                        return total;
                    }
                }
            })
        </script>
    </body>
</html>