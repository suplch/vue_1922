<html>
    <head>

    </head>
    <body>
        <script>
            class Events {
                constructor() {
                    // this.callbackContainer ç”¨æ¥ä¿å­˜ æŸä¸€ä¸ªäº‹ä»¶æ‰€å¯¹åº”çš„å›è°ƒå‡½æ•°
                    this.callbackContainer = {};
                    // this.callbackContainer = {
                    //     'æˆ‘é¥¿äº†': [
                    //         function() {},
                    //         function() {},
                    //     ],
                    //     'æˆ‘æ¸´äº†'': [
                    //         function() {},
                    //     ]
                    // };
                }
                // ç›‘å¬ æŸä¸€ä¸ª eventName æ‰€æŒ‡ç¤ºçš„äº‹ä»¶
                // å°†å›è°ƒå‡½æ•° ä¿å­˜ åˆ° eventName æ‰€å¯¹åº”çš„ å›è°ƒå®¹å™¨ä¸­ (callbackContainer)
                $on(eventName, callback) {
                    let callbackList =  this.callbackContainer[eventName];
                    // å¦‚æœ å›è°ƒ æ•°ç»„ä¸å­˜åœ¨, é‚£ä¹ˆåˆ›å»ºä¸€ä¸ª
                    if (!callbackList) {
                        // é©¬ä¸Šåˆ›å»º
                        callbackList = [];
                        // æ”¾å› eventName æ‰€å¯¹åº”çš„ callbackContainer 
                        this.callbackContainer[eventName] = callbackList
                    }
                    // å°†å›è°ƒ å‡½æ•° ä¿å­˜åˆ° æ•°ç»„ä¸­
                    callbackList.push(callback)
                }
                // è§¦å‘ eventName, 
                $emit(eventName, data){
                    // é€šè¿‡ eventName è·å– callbackContainer ä¿å­˜çš„å¯¹åº”å›è°ƒå‡½æ•°æ•°ç»„
                    let callbackList = this.callbackContainer[eventName];
                    // å¦‚æœ å›è°ƒå‡½æ•°æ•°ç»„ æœ‰æ•ˆ
                    if (callbackList) {
                        // å¾ªç¯ ä¸€ä¸ªä¸€ä¸ªçš„è°ƒç”¨æ‰€æœ‰çš„å›è°ƒ
                        for (let callback of callbackList) {
                            // å°† emit çš„ data å‚æ•° ä¹Ÿä¼ é€’åˆ° callbacké‡Œ
                            callback(data);
                        }
                    }
                }
            }


            let events = new Events();
            events.$on('æˆ‘é¥¿äº†', function(data) {
                console.log('åƒç‚¹: ', data);
            });

            events.$on('æˆ‘é¥¿äº†', function(data) {
                console.log('åƒç‚¹: ', data);
            });

            events.$on('æˆ‘æ¸´äº†', function(data) {
                console.log('å–ç‚¹: ', data);
            })

            events.$emit('æˆ‘é¥¿äº†', "ğŸš")
            events.$emit('æˆ‘é¥¿äº†', "ğŸ—")

            events.$emit('æˆ‘æ¸´äº†', 'å¯å£å¯ä¹')

            
        </script>
    </body>
</html>